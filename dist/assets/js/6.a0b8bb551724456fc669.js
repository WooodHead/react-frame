/*! This file is created by fangbao */
webpackJsonp([6],{552:function(t,e,a){a(571);var s=a(5)(a(563),a(582),"data-v-43eb85e3",null);t.exports=s.exports},563:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var s=a(134),n=a(69),i=a(68),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default={components:{WlbHeader:s.WlbHeader,SelectAvatar:s.SelectAvatar,ScrollWrapper:s.ScrollWrapper},data:function(){return{userInfo:{},allHeadImgs:{},nickname:"",changed:!1,index:1}},computed:{},created:function(){var t=this;n.loading.show(!0,"full"),this.$http([{url:this.$api.api_list,method:"getBbsUserInfo",params:[{}]},{url:this.$api.api_list,method:"getBbsUserAllHeadImg",params:[{}]}]).then(function(e){t.userInfo=e[0].data.result.data,t.allHeadImgs=e[1].data.result.data,setTimeout(function(){t.changed=!1},0),n.loading.show(!1)})},mounted:function(){var t=this;r.default.$on("select-avatar",function(e){t.userInfo.head_img=t.allHeadImgs[e],t.index=e})},watch:{userInfo:{deep:!0,handler:function(t){this.changed=!0}}},methods:{editAvatar:function(){t("input").blur(),r.default.$emit("show-select-avatar-page")},save:function(){this.changed&&(this.changed=!1,n.loading.show(!0),this.$http([{url:this.$api.api_list,method:"updateBbsUserHeadimg",params:[{head_img:this.index}]},{url:this.$api.api_list,method:"updateBbsUserNickname",params:[{nickname:this.userInfo.nickname}]}]).then(function(t){n.loading.show(!1);var e;if(t[1].data.result){var a=t[1].data.result.code;e=t[1].data.result.data,0===a?n.ruleModal.show({content:"信息修改成功",style:"text-align: center"}):n.ruleModal.show({content:e,style:"text-align: center"})}t[1].data.error&&(e=t[1].data.error.message,n.ruleModal.show({content:e,style:"text-align: center"}))}))}},destroyed:function(){r.default.$off("show-select-avatar-page")}}}).call(e,a(34))},571:function(t,e){},582:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"view"},[s("wlb-header",[s("span",{slot:"title"},[t._v("个人中心")])]),t._v(" "),s("scroll-wrapper",[s("div",{staticClass:"scroll"},[s("div",{staticClass:"edit-section"},[s("div",{staticClass:"item",on:{click:function(e){t.editAvatar()}}},[s("span",{staticClass:"photo-title"},[t._v("头像")]),t._v(" "),s("div",{staticClass:"photo-right fr"},[s("span",{staticClass:"right fr"}),t._v(" "),s("img",{directives:[{name:"lazyload",rawName:"v-lazyload",value:{placeholder:a(67)},expression:"{ placeholder: require('../imgs/avatar_defult_big.png') }"}],staticClass:"photo fr",attrs:{src:t.userInfo.head_img}})])]),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"name-title fl"},[t._v("昵称")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.nickname,expression:"userInfo.nickname"}],staticClass:"name-right fr",domProps:{value:t.userInfo.nickname},on:{input:function(e){e.target.composing||(t.userInfo.nickname=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"edit-btn"},[s("button",{class:["btn",{changed:t.changed}],on:{click:t.save}},[t._v("保存")])])])]),t._v(" "),s("select-avatar",{attrs:{data:t.allHeadImgs}})],1)},staticRenderFns:[]}}});