/*! This file is created by fangbao */
webpackJsonp([6],{253:function(e,t,a){a(272);var s=a(0)(a(264),a(282),"data-v-43eb85e3",null);s.options.__file="E:\\项目\\wanglibao\\BBS\\src\\views\\personInfoEdit.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__esModule"!==e}),s.options.functional,e.exports=s.exports},264:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(50),n=a(22),i=a(52),o=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default={components:{WlbHeader:s.WlbHeader,SelectAvatar:s.SelectAvatar},data:function(){return{userInfo:{},allHeadImgs:{},nickname:"",changed:!1,index:1}},computed:{},created:function(){var e=this;n.loading.show(!0,"full"),this.$http([{url:this.$api.api_list,method:"getBbsUserInfo",params:[{}]},{url:this.$api.api_list,method:"getBbsUserAllHeadImg",params:[{}]}]).then(function(t){e.userInfo=t[0].data.result.data,e.allHeadImgs=t[1].data.result.data,setTimeout(function(){e.changed=!1},0),n.loading.show(!1)})},mounted:function(){var e=this;o.default.$on("select-avatar",function(t){e.userInfo.head_img=e.allHeadImgs[t],e.index=t})},watch:{userInfo:{deep:!0,handler:function(e){this.changed=!0}}},methods:{editAvatar:function(){o.default.$emit("show-select-avatar-page")},save:function(){this.changed&&(this.changed=!1,n.loading.show(!0),this.$http([{url:this.$api.api_list,method:"updateBbsUserHeadimg",params:[{head_img:this.index}]},{url:this.$api.api_list,method:"updateBbsUserNickname",params:[{nickname:this.userInfo.nickname}]}]).then(function(e){if(n.loading.show(!1),e[1].data.result){var t=e[1].data.result.code,a=e[1].data.result.data;0===t?n.ruleModal.show({content:"信息修改成功",style:"text-align: center"}):n.ruleModal.show({content:a,style:"text-align: center"})}}))}},destroyed:function(){o.default.$off("show-select-avatar-page")}}},272:function(e,t){},282:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"view"},[s("wlb-header",[s("span",{slot:"title"},[e._v("个人中心")])]),e._v(" "),s("div",{staticClass:"edit-section"},[s("div",{staticClass:"item",on:{click:function(t){e.editAvatar()}}},[s("span",{staticClass:"photo-title"},[e._v("头像")]),e._v(" "),s("div",{staticClass:"photo-right fr"},[s("span",{staticClass:"right fr"}),e._v(" "),s("img",{directives:[{name:"lazyload",rawName:"v-lazyload",value:{placeholder:a(21)},expression:"{ placeholder: require('../imgs/avatar_defult_big.png') }"}],staticClass:"photo fr",attrs:{src:e.userInfo.head_img}})])]),e._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"name-title fl"},[e._v("昵称")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.userInfo.nickname,expression:"userInfo.nickname"}],staticClass:"name-right fr",domProps:{value:e.userInfo.nickname},on:{input:function(t){t.target.composing||(e.userInfo.nickname=t.target.value)}}})])]),e._v(" "),s("div",{staticClass:"edit-btn"},[s("button",{class:["btn",{changed:e.changed}],on:{click:e.save}},[e._v("保存")])]),e._v(" "),s("select-avatar",{attrs:{data:e.allHeadImgs}})],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});