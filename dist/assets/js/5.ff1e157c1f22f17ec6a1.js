/*! This file is created by fangbao */
webpackJsonp([5],{553:function(t,a,e){e(568);var o=e(5)(e(564),e(579),"data-v-0682e644",null);t.exports=o.exports},564:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e(134);a.default={components:{ScrollWrapper:o.ScrollWrapper,WlbHeader:o.WlbHeader,NewsItem:o.NewsItem,Loadmore:o.Loadmore,NoMore:o.NoMore},data:function(){return{data:[],page:1,lastPage:1,nomore:!1}},created:function(){var t=this;this.$plugin.loading.show(!0,"full"),this.loadData(function(){t.$plugin.loading.show(!1)})},computed:{allLoaded:function(){return this.nomore}},methods:{loadData:function(t){var a=this;this.$http({url:this.$api.api_list,method:"getBbsUserPm",params:[{pageNum:this.$const.BBS_USER_PM_PAGE_NUM,page:this.page}]}).then(function(e){a.page+=1,a.lastPage=e.data.result.data.last_page,a.lastPage+1>=a.page&&(2===a.page?a.data=e.data.result.data.list:a.data=a.data.concat(e.data.result.data.list)),a.lastPage<a.page?a.nomore=!0:a.nomore=!1,t&&t()})},loadTop:function(){var t=this;this.page=1,this.$plugin.loading.show(!0),this.loadData(function(){t.$plugin.loading.show(!1),t.$refs.loadmore.$children[0].onTopLoaded()})},loadBottom:function(){var t=this;if(this.page>this.lastPage)return"";this.$plugin.loading.show(!0),this.loadData(function(){t.$plugin.loading.show(!1),t.$refs.loadmore.$children[0].onBottomLoaded()})},doDel:function(){var t=this;this.$rulemodal.show(!1),this.$http({url:this.$api.api_list,method:"delBbsUserAllPm",params:[{}]}).then(function(a){t.data=[],t.$rulemodal.show({content:"已全部删除了消息",style:"text-align: center"})})},allDel:function(){var t=this;0===this.data.length?this.$rulemodal.show({content:"没有可删除的消息",style:"text-align: center"}):this.$rulemodal.show({content:"已全部删除了消息",style:"text-align: center",ok:{callback:function(){t.doDel()}}})}}}},568:function(t,a){},579:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"view"},[e("wlb-header",[e("span",{slot:"title"},[t._v("我的消息")]),t._v(" "),e("span",{staticClass:"rightBtnText",on:{click:t.allDel},slot:"right"},[t._v("全部删除")])]),t._v(" "),e("scroll-wrapper",[t.data.length?e("loadmore",{ref:"loadmore",attrs:{"cb-load-top":t.loadTop,"cb-load-bottom":t.loadBottom,"all-loaded":t.allLoaded}},[e("div",{staticStyle:{"min-height":"8rem"}},[t._l(t.data,function(t,a){return e("news-item",{key:a,attrs:{item:t}})}),t._v(" "),t.data.length>0?e("no-more",{attrs:{visible:t.nomore}}):t._e()],2)]):t._e(),t._v(" "),0===t.data.length?e("div",{staticClass:"empty"},[e("div",[t._v("还没有消息哦")])]):t._e()],1)],1)},staticRenderFns:[]}}});